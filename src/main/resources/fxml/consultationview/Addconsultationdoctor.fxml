<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>

<VBox fx:controller="Controllers.AddConsultationDoctorController"
      xmlns="http://javafx.com/javafx/21"
      xmlns:fx="http://javafx.com/fxml/1"
      stylesheets="@../../css/consultation.css"
      styleClass="dialog-root"
      spacing="0"
      prefWidth="560">

    <!-- â”€â”€ Header strip â”€â”€ -->
    <VBox styleClass="dialog-header" spacing="6">
        <padding><Insets top="28" right="32" bottom="24" left="32"/></padding>
        <HBox spacing="12" alignment="CENTER_LEFT">
            <Label text="ðŸ©º" style="-fx-font-size: 22;"/>
            <Label text="New Consultation" styleClass="dialog-title"/>
        </HBox>
        <Label fx:id="headerSubtitle" text="Appointment #â€”  Â·  Loadingâ€¦" styleClass="dialog-subtitle"/>
    </VBox>

    <!-- â”€â”€ Meta chips (read-only context) â”€â”€ -->
    <HBox styleClass="meta-strip" spacing="0">
        <VBox styleClass="meta-chip" HBox.hgrow="ALWAYS" alignment="CENTER">
            <Label text="APPOINTMENT" styleClass="meta-chip-label"/>
            <Label fx:id="metaApptId" text="â€”" styleClass="meta-chip-value"/>
        </VBox>
        <VBox styleClass="meta-chip meta-chip-mid" HBox.hgrow="ALWAYS" alignment="CENTER">
            <Label text="CLIENT" styleClass="meta-chip-label"/>
            <Label fx:id="metaClientName" text="â€”" styleClass="meta-chip-value"/>
        </VBox>
        <VBox styleClass="meta-chip" HBox.hgrow="ALWAYS" alignment="CENTER">
            <Label text="CONFIRMED DATE" styleClass="meta-chip-label"/>
            <Label fx:id="metaConfirmedDate" text="â€”" styleClass="meta-chip-value"/>
        </VBox>
    </HBox>

    <!-- â”€â”€ Form body â”€â”€ -->
    <VBox styleClass="dialog-body" spacing="20">
        <padding><Insets top="28" right="32" bottom="28" left="32"/></padding>

        <!-- Consultation Date -->
        <VBox spacing="6">
            <Label text="Consultation Date" styleClass="field-label"/>
            <DatePicker fx:id="consultationDatePicker"
                        styleClass="field-date-picker"
                        maxWidth="Infinity"/>
        </VBox>

        <!-- Notes -->
        <VBox spacing="6">
            <Label text="Clinical Notes" styleClass="field-label"/>
            <TextArea fx:id="notesArea"
                      promptText="Observations, symptoms, patient historyâ€¦"
                      styleClass="field-textarea"
                      prefRowCount="3"
                      wrapText="true"/>
        </VBox>

        <!-- Diagnosis -->
        <VBox spacing="6">
            <Label text="Diagnosis" styleClass="field-label"/>
            <TextArea fx:id="diagnosisArea"
                      promptText="Primary diagnosis and supporting findingsâ€¦"
                      styleClass="field-textarea"
                      prefRowCount="3"
                      wrapText="true"/>
        </VBox>

        <!-- Prescription -->
        <VBox spacing="6">
            <Label text="Prescription" styleClass="field-label"/>
            <TextArea fx:id="prescriptionArea"
                      promptText="Medications, dosage, duration, instructionsâ€¦"
                      styleClass="field-textarea"
                      prefRowCount="3"
                      wrapText="true"/>
        </VBox>

        <!-- Error label -->
        <Label fx:id="errorLabel" styleClass="error-label"
               visible="false" managed="false" wrapText="true"/>

    </VBox>

    <!-- â”€â”€ Footer actions â”€â”€ -->
    <HBox styleClass="dialog-footer" spacing="12" alignment="CENTER_RIGHT">
        <padding><Insets top="18" right="32" bottom="22" left="32"/></padding>
        <Button text="Cancel"    styleClass="btn-cancel"  onAction="#handleCancel"  minWidth="100"/>
        <Button text="Save Consultation" styleClass="btn-save" onAction="#handleSave" minWidth="160"/>
    </HBox>

</VBox>
